require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({3:[function(require,module,exports) {
function t(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function e(t){this.element=document.createElement("div"),this.value=t.value,this.position={x:t.position.x,y:t.position.y},this.isJoined=!1}e.prototype.move=function(t){this.position.x=t.x,this.position.y=t.y},e.prototype.render=function(){var t=100*this.position.y+5*this.position.y,e=100*this.position.x+5*this.position.x;return this.element.style.cssText="top: "+t+"px; left: "+e+"px;",this.element.className="fade thing t"+this.value,this.isJoined=!1,this.element};var i=function(){var t=localStorage.getItem("bestScore")||0,i=0,o=document.getElementById("playfield"),n=document.getElementById("gameover"),s=document.getElementById("currentscore"),r=document.getElementById("bestscore"),a=function(){this.tileList=[new Array(4),new Array(4),new Array(4),new Array(4)]};function l(t,e){return e<0&&0===t||e>0&&3===t}return a.prototype.__randomTile=function(){for(var t={x:Math.floor(4*Math.random()),y:Math.floor(4*Math.random())};void 0!==this.tileList[t.x][t.y];)t={x:Math.floor(4*Math.random()),y:Math.floor(4*Math.random())};this.tileList[t.x][t.y]=new e({value:10*Math.random()>9?4:2,position:t}),o.appendChild(this.tileList[t.x][t.y].element)},a.prototype.__removeTile=function(t){this.tileList[t.position.x][t.position.y]=void 0,o.removeChild(t.element)},a.prototype.__moveAndJoin=function(t,e){return t.value*=2,t.isJoined=!0,this.__removeTile(this.tileList[e.x][e.y]),this.tileList[e.x][e.y]=t,t.value},a.prototype.__moveTile=function(t,e,i){if(!t)return-1;if(l(t.position.x,e))return-1;if(l(t.position.y,i))return-1;var o={x:t.position.x,y:t.position.y},n=0;do{if(l(o.x,e))break;if(l(o.y,i))break;o.x=o.x+e,o.y=o.y+i}while(void 0===this.tileList[o.x][o.y]);if(void 0===this.tileList[o.x][o.y])this.tileList[o.x][o.y]=t;else if(this.tileList[o.x][o.y].isJoined||this.tileList[o.x][o.y].value!==t.value){if(void 0!==this.tileList[o.x-e][o.y-i])return-1;o.x=o.x-e,o.y=o.y-i,this.tileList[o.x][o.y]=t}else n=this.__moveAndJoin(t,o);return this.tileList[t.position.x][t.position.y]=void 0,t.move(o),n},a.prototype.moveTiles=function(t){for(var e=0,o=!1,s=0;s<4;s++)for(var r=0;r<4;r++){switch(t){case"left":e=this.__moveTile(this.tileList[s][r],-1,0);break;case"right":e=this.__moveTile(this.tileList[3-s][r],1,0);break;case"up":e=this.__moveTile(this.tileList[s][r],0,-1);break;case"down":e=this.__moveTile(this.tileList[s][3-r],0,1);break;default:return}-1!==e&&(i+=e,o=!0)}o&&(this.__randomTile(),this.checkGameOver()&&(n.style.zIndex="100"))},a.prototype.checkGameOver=function(){for(var t=!1,e=0;e<4;e++)for(var i=0;i<4;i++){var o=this.tileList[e][i],n=e<3?this.tileList[e+1][i]:void 0,s=i<3?this.tileList[e][i+1]:void 0;if(void 0===o)return!1;if(s&&o.value===s.value)return!1;if(n&&o.value===n.value)return!1;t=!0}return t},a.prototype.reset=function(){var t=this;this.tileList.filter(Boolean).forEach(function(e){e.filter(Boolean).forEach(function(e){t.__removeTile(e)})}),n.style.zIndex="-1",i=0,this.__randomTile(),this.render()},a.prototype.render=function(){t=i>t?i:t,s.textContent=i,r.textContent=t,localStorage.setItem("bestScore",t),this.tileList.filter(Boolean).forEach(function(t){t.filter(Boolean).forEach(function(t){t.render()})})},a}();function o(){this.downX=void 0,this.downY=void 0,this.upX=void 0,this.upY=void 0}o.prototype.getDirection=function(){var t="";return this.upX<this.downX&&Math.abs(this.upX-this.downX)>Math.abs(this.upY-this.downY)&&(t="left"),this.upX>this.downX&&Math.abs(this.upX-this.downX)>Math.abs(this.upY-this.downY)&&(t="right"),this.upY<this.downY&&Math.abs(this.upX-this.downX)<Math.abs(this.upY-this.downY)&&(t="up"),this.upY>this.downY&&Math.abs(this.upX-this.downX)<Math.abs(this.upY-this.downY)&&(t="down"),t},o.prototype.onMouseDown=function(t){this.downX=t.pageX,this.downY=t.pageY},o.prototype.onMouseUp=function(t){this.upX=t.pageX,this.upY=t.pageY},o.prototype.reset=function(){this.downX=void 0,this.downY=void 0,this.upX=void 0,this.upY=void 0},window.onload=function(){var e=document.getElementById("reset"),n=document.getElementById("playfield"),s=new i,r=new o;s.reset(),document.addEventListener("keydown",function(t){switch(t.which){case 37:s.moveTiles("left");break;case 38:s.moveTiles("up");break;case 39:s.moveTiles("right");break;case 40:s.moveTiles("down");break;default:return}s.render()}),n.addEventListener("mousedown",function(t){r.onMouseDown(t)}),n.addEventListener("touchstart",function(t){var e=t.touches[0];r.onMouseDown(e)}),n.addEventListener("mouseup",function(t){r.onMouseUp(t),s.moveTiles(r.getDirection()),s.render(),r.reset()}),n.addEventListener("touchend",function(t){var e=t.changedTouches[0];r.onMouseUp(e),s.moveTiles(r.getDirection()),s.render()}),e.addEventListener("click",function(){s.reset()});var a=function(){var t=document.querySelector(".mode");!1===navigator.onLine?t.classList.add("offline"):t.classList.remove("offline")};if(window.addEventListener("online",a),window.addEventListener("offline",a),a(),"serviceWorker"in navigator){var l=Array.from(document.querySelectorAll("script")).map(function(t){return t.src.replace(location.origin,"")}),h=Array.from(document.querySelectorAll("link")).map(function(t){return t.href.replace(location.origin,"")}).filter(function(t){return t.match(".css")}),u=["/","/index.html"].concat(t(l),t(h));navigator.serviceWorker.register("93c52a99349a6aae9481f78e6063eb3d.js").then(function(t){console.log("Service Worker Registered"),null!==t.installing&&t.installing.postMessage({cacheUrls:u})})}};
},{"./appCache.js":[["93c52a99349a6aae9481f78e6063eb3d.js",4],4]}]},{},[3])