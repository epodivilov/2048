require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({6:[function(require,module,exports) {
function t(t){this.element=document.createElement("div"),this.value=t.value,this.position={x:t.position.x,y:t.position.y},this.isJoined=!1}t.prototype.move=function(t){this.position.x=t.x,this.position.y=t.y},t.prototype.render=function(){var t=100*this.position.y+5*this.position.y,e=100*this.position.x+5*this.position.x;return this.element.style.cssText="top: "+t+"px; left: "+e+"px;",this.element.className="fade thing t"+this.value,this.isJoined=!1,this.element};var e=function(){var e,i=localStorage.getItem("bestScore")||0,o=0,n=document.getElementById("playfield"),s=document.getElementById("gameover"),r=document.getElementById("currentscore"),h=document.getElementById("bestscore");function a(t,e){return e<0&&0===t||e>0&&3===t}return(e=function(){this.tileList=[new Array(4),new Array(4),new Array(4),new Array(4)]}).prototype.__randomTile=function(){for(var e={x:Math.floor(4*Math.random()),y:Math.floor(4*Math.random())};void 0!==this.tileList[e.x][e.y];)e={x:Math.floor(4*Math.random()),y:Math.floor(4*Math.random())};this.tileList[e.x][e.y]=new t({value:10*Math.random()>9?4:2,position:e}),n.appendChild(this.tileList[e.x][e.y].element)},e.prototype.__removeTile=function(t){this.tileList[t.position.x][t.position.y]=void 0,n.removeChild(t.element)},e.prototype.__moveAndJoin=function(t,e){return t.value*=2,t.isJoined=!0,this.__removeTile(this.tileList[e.x][e.y]),this.tileList[e.x][e.y]=t,t.value},e.prototype.__moveTile=function(t,e,i){if(!t)return-1;if(a(t.position.x,e))return-1;if(a(t.position.y,i))return-1;var o={x:t.position.x,y:t.position.y},n=0;do{if(a(o.x,e))break;if(a(o.y,i))break;o.x=o.x+e,o.y=o.y+i}while(void 0===this.tileList[o.x][o.y]);if(void 0===this.tileList[o.x][o.y])this.tileList[o.x][o.y]=t;else if(this.tileList[o.x][o.y].isJoined||this.tileList[o.x][o.y].value!==t.value){if(void 0!==this.tileList[o.x-e][o.y-i])return-1;o.x=o.x-e,o.y=o.y-i,this.tileList[o.x][o.y]=t}else n=this.__moveAndJoin(t,o);return this.tileList[t.position.x][t.position.y]=void 0,t.move(o),n},e.prototype.moveTiles=function(t){for(var e=0,i=!1,n=0;n<4;n++)for(var r=0;r<4;r++){switch(t){case"left":e=this.__moveTile(this.tileList[n][r],-1,0);break;case"right":e=this.__moveTile(this.tileList[3-n][r],1,0);break;case"up":e=this.__moveTile(this.tileList[n][r],0,-1);break;case"down":e=this.__moveTile(this.tileList[n][3-r],0,1);break;default:return}-1!==e&&(o+=e,i=!0)}i&&(this.__randomTile(),this.checkGameOver()&&(s.style.zIndex="100"))},e.prototype.checkGameOver=function(){for(var t=!1,e=0;e<4;e++)for(var i=0;i<4;i++){var o=this.tileList[e][i],n=e<3?this.tileList[e+1][i]:void 0,s=i<3?this.tileList[e][i+1]:void 0;if(void 0===o)return!1;if(s&&o.value===s.value)return!1;if(n&&o.value===n.value)return!1;t=!0}return t},e.prototype.reset=function(){var t=this;this.tileList.filter(Boolean).forEach(function(e){e.filter(Boolean).forEach(function(e){t.__removeTile(e)})}),s.style.zIndex="-1",o=0,this.__randomTile(),this.render()},e.prototype.render=function(){i=o>i?o:i,r.textContent=o,h.textContent=i,localStorage.setItem("bestScore",i),this.tileList.filter(Boolean).forEach(function(t){t.filter(Boolean).forEach(function(t){t.render()})})},e}();function i(){this.downX=void 0,this.downY=void 0,this.upX=void 0,this.upY=void 0}i.prototype.getDirection=function(){var t="";return this.upX<this.downX&&Math.abs(this.upX-this.downX)>Math.abs(this.upY-this.downY)&&(t="left"),this.upX>this.downX&&Math.abs(this.upX-this.downX)>Math.abs(this.upY-this.downY)&&(t="right"),this.upY<this.downY&&Math.abs(this.upX-this.downX)<Math.abs(this.upY-this.downY)&&(t="up"),this.upY>this.downY&&Math.abs(this.upX-this.downX)<Math.abs(this.upY-this.downY)&&(t="down"),t},i.prototype.onMouseDown=function(t){this.downX=t.pageX,this.downY=t.pageY},i.prototype.onMouseUp=function(t){this.upX=t.pageX,this.upY=t.pageY},i.prototype.reset=function(){this.downX=void 0,this.downY=void 0,this.upX=void 0,this.upY=void 0},window.onload=function(){var t=document.getElementById("reset"),o=document.getElementById("playfield"),n=new e,s=new i;n.reset(),document.addEventListener("keydown",function(t){switch(t.which){case 37:n.moveTiles("left");break;case 38:n.moveTiles("up");break;case 39:n.moveTiles("right");break;case 40:n.moveTiles("down");break;default:return}n.render()}),o.addEventListener("mousedown",function(t){s.onMouseDown(t)}),o.addEventListener("touchstart",function(t){var e=t.touches[0];s.onMouseDown(e)}),o.addEventListener("mouseup",function(t){s.onMouseUp(t),n.moveTiles(s.getDirection()),n.render(),s.reset()}),o.addEventListener("touchend",function(t){var e=t.changedTouches[0];s.onMouseUp(e),n.moveTiles(s.getDirection()),n.render()}),t.addEventListener("click",function(){n.reset()})};
},{}]},{},[6])